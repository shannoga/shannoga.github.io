---
layout: post
title:  "infinite recursion"
subtitle: "Calling a method from within itself"
date:   2015-01-16 22:41:57
categories: mistake objective-c xcode
---

One of the mos common mistakes that is preety easy to understand and fix is calling a property from it's own getter.

Let's say we have a string property called `name`  

{% highlight objective-c %}
@property (nonatomic, copy) NSString * name;
{% endhighlight %}

Since this is a persons name, every time we access this property we want to capitalize it, so we use the getter to do that -

{% highlight objective-c %}
- (NSString *)name
{
    NSString *capitalizedName = [self.name capitalizedString];
    return capitalizedName;
}
{% endhighlight %}

And lastly somewhere in our code we access the `name` property -

{% highlight objective-c %}
NSString *nameText = [NSString stringWithFormat:@"Hello %@",self.name];
{% endhighlight %}

Runing the app will cause xCode to stuck for a few seconds and then we will crash.

**Why ?**

What we did is created an `infinite recursion` that causes a [Stack overflow][link-1], and simpler - We just created a method that calls itself again and again and again and again.............and again...

When we wanted to access the `name` property, we used 
{% highlight objective-c %} 
self.name
{% endhighlight %} 

The compiler then "went" to get the `name` from the getter.
{% highlight objective-c %}
- (NSString *)name;
{% endhighlight %}

inside the getter, it got to the first line which states - 
{% highlight objective-c %} 
NSString *capitalizedName = [self.name capitalizedString];
{% endhighlight %} 

It read trough the first line joyfuly and right after the `NSString *capitalizedName =` it got to this chunk of code - 
{% highlight objective-c %} 
self.name 
{% endhighlight %} 

So it went back to the beggining of the `name` getter, inside the getter, it got to the first line which states - 
{% highlight objective-c %} 
NSString *capitalizedName = [self.name capitalizedString];
{% endhighlight %} 

It read trough the first line joyfuly and right after the `NSString *capitalizedName =` it got to this chunk of code - 
{% highlight objective-c %} 
self.name 
{% endhighlight %} 

So it went back to the beggining of the `name` getter, inside the getter, it got to the first line which states - 
{% highlight objective-c %} 
NSString *capitalizedName = [self.name capitalizedString];
{% endhighlight %} 

It read trough the first line joyfuly and right after the `NSString *capitalizedName =` it got to this chunk of code - 
{% highlight objective-c %} 
self.name 
{% endhighlight %} 

So it went back to the beggining of the `name` getter, inside the getter, it got to the first line which states - 
{% highlight objective-c %} 
NSString *capitalizedName = [self.name capitalizedString];
{% endhighlight %} 

It read trough  the first line joyfuly and right after the `NSString *capitalizedName =` it got to this chunk of code - 
{% highlight objective-c %} 
self.name 
{% endhighlight %} 

So it went back to the beggining of the `name` getter, inside the getter, it got to the first line which states - 
{% highlight objective-c %} 
NSString *capitalizedName = [self.name capitalizedString];
{% endhighlight %} 

It read trough  the first line joyfuly and right after the `NSString *capitalizedName =` it got to this chunk of code - 
{% highlight objective-c %} 
self.name 
{% endhighlight %} 

And again, and again, and again.......


**How to fix it ?**

The fix is simple, all we need to do it to 




[link-1]: http://en.wikipedia.org/wiki/Stack_overflow